<div class="container mt-4">
  <mat-card>
    <mat-card-header>
      <mat-card-title>FORMATIONS</mat-card-title>
      <button mat-raised-button color="primary"
              [routerLink]="['/admin/formations/nouvelle']"
              *ngIf="hasRequiredRole(currentUser$ | async)">
        + Ajouter une formation
      </button>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="formations.length > 0; else noData">
        <div *ngFor="let formation of formations" class="mb-3">
          <mat-card class="shadow-sm">
            <mat-card-header>
              <mat-card-title>{{ formation.titre }}</mat-card-title>
              <mat-card-subtitle>
                {{ formation.typeFormation }} - {{ formation.niveauFormation }}
              </mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p>{{ formation.description }}</p>
              <p><strong>Début :</strong> {{ formation.dateDebut | date:'longDate' }}</p>
              <p><strong>Fin :</strong> {{ formation.dateFin | date:'longDate' }}</p>
              <p><strong>Capacité :</strong> {{ formation.capacite }} personnes</p>
              <p><strong>Tarif :</strong> {{ formation.tarif }} FCFA</p>
            </mat-card-content>
            <mat-card-actions>
              <button mat-raised-button color="primary"
                      *ngIf="formation.id !== undefined"
                      (click)="inscrireFormation(formation.id!)">
                <mat-icon>how_to_reg</mat-icon>S'inscrire
              </button>
              <button mat-button color="accent"
                      [routerLink]="['/formations', formation.id]"
                      *ngIf="hasRequiredRole(currentUser$ | async)">
                <mat-icon>edit</mat-icon> Modifier</button>
            </mat-card-actions>
          </mat-card>
        </div>
      </div>
      <ng-template #noData>
        <p>Aucune formation disponible pour le moment.</p>
      </ng-template>
    </mat-card-content>
  </mat-card>
</div>
